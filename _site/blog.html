<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8" />

    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>BeatleTech | Coen Stevens | Big Data &amp; Machine Learning Engineer</title>

    <meta name="description" content="Freelance company BeatleTech by Coen Stevens" />

    
    <meta name="keywords" content="Big Data, Data Engineer, Data science, web developer, beatlevic, Coen Stevens, hacker, architect, freelancer, ruby, clojure, javascript, machine learning" />
    

    <meta name="author" content="Coen Stevens" />

    <link href="style.css" rel="stylesheet" type="text/css" />

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
    <link rel="alternate" type="application/atom+xml" title="Recent Posts" href="https://feeds.feedburner.com/beatletech" />

    <!--[if lt IE 9]>
      <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->

    <!--[if lte IE 7]>
      <link href="css/ie.css" rel="stylesheet" type="text/css" />
    <![endif]-->

  </head>

  <body>

    <div id="wrapper" class="container_12">

      <header id="header" class="grid_12">

        <h1><a href="/blog">BeatleTech</a></h1>
        <img id="headshot" src="https://s3-eu-west-1.amazonaws.com/eu-west-1.beatletech.com/images/headshot.png" alt="It's only Hubris if you lose." title="It's only Hubris if you lose." height="155" width="200" class="thumbnail alignright" onmouseover="onHover();" onmouseout="offHover();" />
        <div id="freelancer">Coen JC Stevens</div>
      </header> <!-- end header -->

      <div id="content">

        <nav>
          <ul id="menu" class="clearfix no-margin">
            <li ><a href="/">About</a></li>
            <li ><a href="setup">Setup</a></li>
            <li class="current"><a href="blog">Blog</a></li>
            <li ><a href="archive">Archive</a></li>
            <li><div id="search-searchbar" style="margin-top: -4px; margin-bottom: -10px; width: 265px"></div></li>
            <li><a href="#" style="background-color: rgb(250, 181, 122); color:white;" data-token="3c500cdbb042fff8c045dd8ba7175b16" onclick="mjOpenPopin(event, this)">Subscribe!</a></li>
          </ul>

          <br class="clear" />
        </nav>

        

<div id="main" class="grid_9 alpha">
  <!-- limit:1 -->
  <!-- <div id="search-searchbar" style="margin-left:20px"></div> -->
  <div id="search-hits-wrapper" style="display:none">
    <h3>Search results</h3>
      <a href="https://www.algolia.com/?utm_source=instantsearch.js&amp;utm_medium=website&amp;utm_content=instantsearchjs.netlify.app&amp;utm_campaign=poweredby" target="_blank" class="ais-PoweredBy-link" style="float:right;margin-right:0px" aria-label="Search by Algolia" rel="noopener noreferrer"><svg height="1.2em" class="ais-PoweredBy-logo" viewBox="0 0 168 24" style="width: auto;"><path fill="#5D6494" d="M6.97 6.68V8.3a4.47 4.47 0 0 0-2.42-.67 2.2 2.2 0 0 0-1.38.4c-.34.26-.5.6-.5 1.02 0 .43.16.77.49 1.03.33.25.83.53 1.51.83a7.04 7.04 0 0 1 1.9 1.08c.34.24.58.54.73.89.15.34.23.74.23 1.18 0 .95-.33 1.7-1 2.24a4 4 0 0 1-2.6.81 5.71 5.71 0 0 1-2.94-.68v-1.71c.84.63 1.81.94 2.92.94.58 0 1.05-.14 1.39-.4.34-.28.5-.65.5-1.13 0-.29-.1-.55-.3-.8a2.2 2.2 0 0 0-.65-.53 23.03 23.03 0 0 0-1.64-.78 13.67 13.67 0 0 1-1.11-.64c-.12-.1-.28-.22-.46-.4a1.72 1.72 0 0 1-.39-.5 4.46 4.46 0 0 1-.22-.6c-.07-.23-.1-.48-.1-.75 0-.91.33-1.63 1-2.17a4 4 0 0 1 2.57-.8c.97 0 1.8.18 2.47.52zm7.47 5.7v-.3a2.26 2.26 0 0 0-.5-1.44c-.3-.35-.74-.53-1.32-.53-.53 0-.99.2-1.37.58-.38.39-.62.95-.72 1.68h3.91zm1 2.79v1.4c-.6.34-1.38.51-2.36.51a4.02 4.02 0 0 1-3-1.13 4.04 4.04 0 0 1-1.11-2.97c0-1.3.34-2.32 1.02-3.06a3.38 3.38 0 0 1 2.6-1.1c1.03 0 1.85.32 2.46.96.6.64.9 1.57.9 2.78 0 .33-.03.68-.09 1.04h-5.31c.1.7.4 1.24.89 1.61.49.38 1.1.56 1.85.56.86 0 1.58-.2 2.15-.6zm6.61-1.78h-1.21c-.6 0-1.05.12-1.35.36-.3.23-.46.53-.46.89 0 .37.12.66.36.88.23.2.57.32 1.02.32.5 0 .9-.15 1.2-.43.3-.28.44-.65.44-1.1v-.92zm-4.07-2.55V9.33a4.96 4.96 0 0 1 2.5-.55c2.1 0 3.17 1.03 3.17 3.08V17H22.1v-.96c-.42.68-1.15 1.02-2.19 1.02-.76 0-1.38-.22-1.84-.66-.46-.44-.7-1-.7-1.68 0-.78.3-1.38.88-1.81.59-.43 1.4-.65 2.46-.65h1.34v-.46c0-.55-.13-.97-.4-1.25-.26-.29-.7-.43-1.32-.43-.86 0-1.65.24-2.35.72zm9.34-1.93v1.42c.39-1 1.1-1.5 2.12-1.5.15 0 .31.02.5.05v1.53c-.23-.1-.48-.14-.76-.14-.54 0-.99.24-1.34.71a2.8 2.8 0 0 0-.52 1.71V17h-1.57V8.91h1.57zm5 4.09a3 3 0 0 0 .76 2.01c.47.53 1.14.8 2 .8.64 0 1.24-.18 1.8-.53v1.4c-.53.32-1.2.48-2 .48a3.98 3.98 0 0 1-4.17-4.18c0-1.16.38-2.15 1.14-2.98a4 4 0 0 1 3.1-1.23c.7 0 1.34.15 1.92.44v1.44a3.24 3.24 0 0 0-1.77-.5A2.65 2.65 0 0 0 32.33 13zm7.92-7.28v4.58c.46-1 1.3-1.5 2.5-1.5.8 0 1.42.24 1.9.73.48.5.72 1.17.72 2.05V17H43.8v-5.1c0-.56-.14-.99-.43-1.29-.28-.3-.65-.45-1.1-.45-.54 0-1 .2-1.42.6-.4.4-.61 1.02-.61 1.85V17h-1.56V5.72h1.56zM55.2 15.74c.6 0 1.1-.25 1.5-.76.4-.5.6-1.16.6-1.95 0-.92-.2-1.62-.6-2.12-.4-.5-.92-.74-1.55-.74-.56 0-1.05.22-1.5.67-.44.45-.66 1.13-.66 2.06 0 .96.22 1.67.64 2.14.43.47.95.7 1.57.7zM53 5.72v4.42a2.74 2.74 0 0 1 2.43-1.34c1.03 0 1.86.38 2.51 1.15.65.76.97 1.78.97 3.05 0 1.13-.3 2.1-.92 2.9-.62.81-1.47 1.21-2.54 1.21s-1.9-.45-2.46-1.34V17h-1.58V5.72H53zm9.9 11.1l-3.22-7.9h1.74l1 2.62 1.26 3.42c.1-.32.48-1.46 1.15-3.42l.91-2.63h1.66l-2.92 7.87c-.78 2.07-1.96 3.1-3.56 3.1-.28 0-.53-.02-.73-.07v-1.34c.17.04.35.06.54.06 1.03 0 1.76-.57 2.17-1.7z"></path><path fill="#5468FF" d="M78.99.94h16.6a2.97 2.97 0 0 1 2.96 2.96v16.6a2.97 2.97 0 0 1-2.97 2.96h-16.6a2.97 2.97 0 0 1-2.96-2.96V3.9A2.96 2.96 0 0 1 79 .94"></path><path fill="#FFF" d="M89.63 5.97v-.78a.98.98 0 0 0-.98-.97h-2.28a.98.98 0 0 0-.97.97V6c0 .09.08.15.17.13a7.13 7.13 0 0 1 3.9-.02c.08.02.16-.04.16-.13m-6.25 1L83 6.6a.98.98 0 0 0-1.38 0l-.46.46a.97.97 0 0 0 0 1.38l.38.39c.06.06.15.04.2-.02a7.49 7.49 0 0 1 1.63-1.62c.07-.04.08-.14.02-.2m4.16 2.45v3.34c0 .1.1.17.2.12l2.97-1.54c.06-.03.08-.12.05-.18a3.7 3.7 0 0 0-3.08-1.87c-.07 0-.14.06-.14.13m0 8.05a4.49 4.49 0 1 1 0-8.98 4.49 4.49 0 0 1 0 8.98m0-10.85a6.37 6.37 0 1 0 0 12.74 6.37 6.37 0 0 0 0-12.74"></path><path fill="#5468FF" d="M120.92 18.8c-4.38.02-4.38-3.54-4.38-4.1V1.36l2.67-.42v13.25c0 .32 0 2.36 1.71 2.37v2.24zm-10.84-2.18c.82 0 1.43-.04 1.85-.12v-2.72a5.48 5.48 0 0 0-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.11-.44.28-.58.49a.93.93 0 0 0-.22.65c0 .63.22 1 .61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.62.11 2.23.33.6.22 1.09.53 1.44.92.36.4.61.92.76 1.48.16.56.23 1.17.23 1.85v6.87c-.4.1-1.03.2-1.86.32-.84.12-1.78.18-2.82.18-.69 0-1.32-.07-1.9-.2a4 4 0 0 1-1.46-.63c-.4-.3-.72-.67-.96-1.13a4.3 4.3 0 0 1-.34-1.8c0-.66.13-1.08.39-1.53.26-.45.6-.82 1.04-1.1.45-.3.95-.5 1.54-.62a8.8 8.8 0 0 1 3.79.05v-.44c0-.3-.04-.6-.11-.87a1.78 1.78 0 0 0-1.1-1.22c-.31-.12-.7-.2-1.15-.2a9.75 9.75 0 0 0-2.95.46l-.33-2.19c.34-.12.84-.23 1.48-.35.65-.12 1.34-.18 2.08-.18zm52.84 9.63c.82 0 1.43-.05 1.85-.13V13.7a5.42 5.42 0 0 0-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.12-.44.28-.58.5a.93.93 0 0 0-.22.65c0 .63.22.99.61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.63.11 2.23.33.6.22 1.1.53 1.45.92.35.39.6.92.76 1.48.15.56.23 1.18.23 1.85v6.88c-.41.08-1.03.19-1.87.31-.83.12-1.77.18-2.81.18-.7 0-1.33-.06-1.9-.2a4 4 0 0 1-1.47-.63c-.4-.3-.72-.67-.95-1.13a4.3 4.3 0 0 1-.34-1.8c0-.66.13-1.08.38-1.53.26-.45.61-.82 1.05-1.1.44-.3.95-.5 1.53-.62a8.8 8.8 0 0 1 3.8.05v-.43c0-.31-.04-.6-.12-.88-.07-.28-.2-.52-.38-.73a1.78 1.78 0 0 0-.73-.5c-.3-.1-.68-.2-1.14-.2a9.85 9.85 0 0 0-2.95.47l-.32-2.19a11.63 11.63 0 0 1 3.55-.53zm-8.03-1.27a1.62 1.62 0 0 0 0-3.24 1.62 1.62 0 1 0 0 3.24zm1.35 13.22h-2.7V7.27l2.7-.42V18.8zm-4.72 0c-4.38.02-4.38-3.54-4.38-4.1l-.01-13.34 2.67-.42v13.25c0 .32 0 2.36 1.72 2.37v2.24zm-8.7-5.9a4.7 4.7 0 0 0-.74-2.79 2.4 2.4 0 0 0-2.07-1 2.4 2.4 0 0 0-2.06 1 4.7 4.7 0 0 0-.74 2.8c0 1.16.25 1.94.74 2.62a2.4 2.4 0 0 0 2.07 1.02c.88 0 1.57-.34 2.07-1.02.49-.68.73-1.46.73-2.63zm2.74 0a6.46 6.46 0 0 1-1.52 4.23c-.49.53-1.07.94-1.76 1.22-.68.29-1.73.45-2.26.45-.53 0-1.58-.15-2.25-.45a5.1 5.1 0 0 1-2.88-3.13 7.3 7.3 0 0 1-.01-4.84 5.13 5.13 0 0 1 2.9-3.1 5.67 5.67 0 0 1 2.22-.42c.81 0 1.56.14 2.24.42.69.29 1.28.69 1.75 1.22.49.52.87 1.15 1.14 1.89a7 7 0 0 1 .43 2.5zm-20.14 0c0 1.11.25 2.36.74 2.88.5.52 1.13.78 1.91.78a4.07 4.07 0 0 0 2.12-.6V9.33c-.19-.04-.99-.2-1.76-.23a2.67 2.67 0 0 0-2.23 1 4.73 4.73 0 0 0-.78 2.8zm7.44 5.27c0 1.82-.46 3.16-1.4 4-.94.85-2.37 1.27-4.3 1.27-.7 0-2.17-.13-3.34-.4l.43-2.11c.98.2 2.27.26 2.95.26 1.08 0 1.84-.22 2.3-.66.46-.43.68-1.08.68-1.94v-.44a5.2 5.2 0 0 1-2.54.6 5.6 5.6 0 0 1-2.01-.36 4.2 4.2 0 0 1-2.58-2.71 9.88 9.88 0 0 1 .02-5.35 4.92 4.92 0 0 1 2.93-2.96 6.6 6.6 0 0 1 2.43-.46 19.64 19.64 0 0 1 4.43.66v10.6z"></path></svg></a>
    <div class="post-list" id="search-hits" style="margin-left: 20px"></div>
    <hr>
  </div>

  
  <div class="post blog">
    <h2><a href="/2020/10/26/docker-on-macos-without-noisy-fans">Docker on macOS without noisy fans</a></h2>
    <p class="publishdate">Monday, 26 October  2020 </p>
    <p><p><img src="https://s3-eu-west-1.amazonaws.com/eu-west-1.beatletech.com/images/docker_logo.png" alt="Docker" width="30%" title="Docker" style="margin-left:250px" /></p>

<h3 id="tldr"><strong>TL;DR</strong></h3>

<ul>
  <li>Running Docker on macOS results in noisy CPU fans and low performance (build times)</li>
  <li>Apple Silicon probably not the answer</li>
  <li>The solution is using remote Linux Docker host (with <a href="#1-install-docker-engine-on-remote-host">setup</a> instructions)</li>
</ul>

<h3 id="noisy-cpu-fans">Noisy CPU fans</h3>

<p>As a developer I’m a big fan of Apple hardware and software ever since I got my first Macbook back in 2008. MacOS is a UNIX operating system running on X86 hardware (changing to ARM soon, but more on that later) that makes developing for Linux production servers a smooth experience utilizing the same UNIX tooling. While my development stack changed over the years and nowadays includes Docker, Kubernetes and <a href="https://bedrock.io">bedrock.io</a>, macOS still continues to serve me well. It is providing these new CLI tools and templates on a stable OS with little to no issues, a nice UI with great HIDPI scaling (rocking a LG 5K monitor over <a href="https://beatletech.com/setup">here</a>), and of course I’ve become so used to the interface that switching back to Windows or Linux Desktop would mess up my optimized workflows and habits.</p>

<p>One thing, however, that could use improvements is Docker Desktop (<a href="https://docs.docker.com/docker-for-mac/">for mac</a>), to increase Docker container performance, speed up docker build times and reduce CPU usage when running “idle”. The reason for being slow and performance hungry is succinctly explained in <a href="https://stackoverflow.com/questions/55951014/docker-in-macos-is-very-slow">this</a> Stackoverflow answer:</p>

<blockquote>
  <p>Docker needs a plain Linux kernel to run. Unfortunately, Mac OS and Windows cannot provide this. Therefore, there is a client on Mac OS to run Docker. In addition to this, there is an abstraction layer between Mac OS kernel and applications (Docker containers) and the filesystems are not the same.</p>
</blockquote>

<p>In other words, there is a lot of extra (hyper)virtualization and filesystem overhead going on. Of course a relative performance hit (compared to running on Linux directly) is something I could live with, but my main annoyance presents itself loudly when I’m building (and deploying) a lot of Docker images: it spins up my Macbook pro CPU fans to audible levels, something in stark contrast to the absolute silence at which my laptop runs almost everything else (I guess I’m spoiled).</p>

<p>While you could argue that you should not build and push Docker images to staging or production from your local development machine and just incorporate it in your CI/CD pipeline, I prefer having this manual control, which is also nicely supported by the <a href="https://bedrock.io">bedrock.io</a> build and deploy commands. This point probably warrants a whole dedicated blog post, but if you are like me, and also run a lot of docker build commands locally, then you will be interested in the solution I found to my <strong>main problem: the lack of macOS docker performance (long build times) and noisy CPU fans</strong>.</p>

<h3 id="apple-silicon-is-not-the-solution">Apple Silicon is not the solution</h3>

<p>With myself being an Apple enthusiast, you can image why I’m excited about the upcoming transition from Intel CPUs to Apple Silicon, which is planned to make its debut in their Macbook Pro and iMac lineup later this year (<a href="https://9to5mac.com/2020/10/09/apple-silicon-november-bloomberg/">Rumors</a> point to a November event). So at first I thought that the answer to the lackluster Docker performance on the Mac would simply be waiting for the new ARM hardware release and buying a new Macbook Pro. However, this might not hold true as Apple Silicon will be an ARM SoC, which is a different architecture than X86_64. And X86_64 is still my deployment target for the foreseeable future. In other words, I still need to build X86_64 images and this will require emulation and virtualization that <a href="http://www.ml-illustrated.com/2020/06/25/ARM-Macs-virtualization-different-take.html">some</a> are expecting to have a 2x to 5x performance hit.</p>

<p>It is also worth noting that Craig Federighi, Apple’s senior vice president of Software Engineering, said the following during an interview after the initial WWDC Apple Silicon announcement:</p>

<blockquote>
  <p>“Virtualization on the new Macs won’t support X86 at all” (<a href="https://www.jeffgeerling.com/blog/2020/what-does-apple-silicon-mean-raspberry-pi-and-arm64">source</a>)</p>
</blockquote>

<p>Craig even explicitly called out Docker containers being built for ARM, and being able to run them on ARM instances in AWS, but what about building your X86 images? I know you can build for multi-arch including ARM now with docker desktop (<a href="https://www.docker.com/blog/multi-arch-images/">post</a>), but what will the performance hit be for Apple Silicon?</p>

<p>All in all, upcoming Apple Silicon doesn’t seem like an immediate win for my specific problem with Docker performance. Also, I like to skip 1st gen hardware and wait on the sidelines a bit longer before I migrate my production workflows to new hardware running on ARM.</p>

<p>Luckily I did find a solution that serves me right away and might also help with the transition to Apple Silicon in the future. <strong>Docker remote to the rescue!</strong></p>

<h3 id="remote-docker-host-solution">Remote Docker host Solution</h3>

<p>Instead of beefing up my local development machine now or with upcoming Apple ARM hardware, I looked into off-loading all the Docker activities onto a remote machine, and as it turns out, it is trivially easy to setup access to a remote docker host. I kinda knew about this, back when I was using Docker Swarm and connecting to different machines, but I somehow never thought about this as a setup for my “local” docker environment.</p>

<p>Needless to say, but one does not setup remote access without a remote machine, so I’m assuming you have a remote Linux machine running somewhere. I personally use and recommend dedicated or cloud servers from <a href="https://www.hetzner.com/">Hetzner</a>, that is if you are located in Europe. I’m using the <a href="https://www.hetzner.com/dedicated-rootserver/ax51-nvme">AX51-NVMe</a> Dedicated Root Server (Ryzen 7 3700X CPU, 64GB RAM, 1TB NVMe SSD), which seems comically cheap at only 59 Euros a month. Anyway, let’s get rolling.</p>

<h4 id="1-install-docker-engine-on-remote-host">1. Install Docker Engine on remote host</h4>
<p>First, let’s install Docker on your remote Linux server (I’m using the <a href="https://docs.docker.com/engine/install/ubuntu/">Ubunty install instructions</a>, but you can find instructions for other distros on that page as well):</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"> <span class="c">## Update the apt package index and install packages to allow apt to use a repository over HTTPS:</span>
 <span class="nv">$ </span><span class="nb">sudo </span>apt-get update

 <span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="se">\</span>
     apt-transport-https <span class="se">\</span>
     ca-certificates <span class="se">\</span>
     curl <span class="se">\</span>
     gnupg-agent <span class="se">\</span>
     software-properties-common

 <span class="c">## Add Docker’s official GPG key:</span>
 <span class="nv">$ </span>curl <span class="nt">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg | <span class="nb">sudo </span>apt-key add -

 <span class="c">## Use the following command to set up the stable repository</span>
 <span class="nv">$ </span><span class="nb">sudo </span>add-apt-repository <span class="se">\</span>
    <span class="s2">"deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="se">\</span><span class="s2">
    </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> </span><span class="se">\</span><span class="s2">
    stable"</span>

 <span class="c">## Install docker engine</span>
 <span class="nv">$ </span><span class="nb">sudo </span>apt-get update
 <span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>docker-ce docker-ce-cli containerd.io</code></pre></figure>

<h4 id="2-create-docker-context">2. Create Docker Context</h4>

<p>Next up we need to access the remote Docker host and make it our default “local” engine. For this we leverage <strong>Docker Contexts</strong> in the following way. First we create a context that will hold the connection path (e.g. <code class="language-plaintext highlighter-rouge">ssh://coen@whatever.com</code>) to the remote docker host:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"> <span class="nv">$ </span>docker context create remote <span class="nt">--docker</span> <span class="nv">host</span><span class="o">=</span>ssh://coen@whatever.com
 remote
 Successfully created context “remote”

 <span class="nv">$ </span>docker context <span class="nb">ls
 </span>NAME       TYPE    DESCRIPTION              DOCKER ENDPOINT    KUBERNETES ENDPOINT    ORCHESTRATOR
 default <span class="k">*</span>  moby    Current DOCKER_HOST...   unix:///var/run/docker.sock               swarm
 remote     moby                             ssh://coen@whatever.com</code></pre></figure>

<p>And the final step is to make <code class="language-plaintext highlighter-rouge">remote</code> your default context:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"> <span class="nv">$ </span>docker context use remote
 remote
 Current context is now “remote”</code></pre></figure>

<h4 id="3-using-your-remote-docker-host">3. Using your remote Docker host</h4>

<p>With the previous 2 steps you are ready to start enjoying a <strong>silent</strong> local development machine when you are building docker images with an increased speed in build time! Any time you now run <code class="language-plaintext highlighter-rouge">docker build</code>, all the relevant (and changed) files that are required for the build are copied from your local computer to the remote Docker host in the background, and the <code class="language-plaintext highlighter-rouge">docker build</code> starts the build of the image on the remote host. The resulting image is also located on the remote host, which you can list with <code class="language-plaintext highlighter-rouge">docker images</code>, as all docker commands use the default <code class="language-plaintext highlighter-rouge">remote</code> context.</p>

<h3 id="benefits">Benefits</h3>

<p>To show you an example of Docker build speed improvements, let’s have a look at the following time measurements for building the <code class="language-plaintext highlighter-rouge">web</code> service component, a React SPA build with Webpack, of <a href="https://github.com/bedrockio/bedrock-core/tree/master/services/web">bedrock</a> on a clean build:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">  +---------+-------------------+--------------------+------------+---------------+
  | Context | Yarn <span class="nb">install time</span> | Webpack build <span class="nb">time</span> | Total <span class="nb">time</span> | Relative <span class="nb">time</span> |
  +---------+-------------------+--------------------+------------+---------------+
  | Local   | 75.82s            | 82.05s             | 157.87s    | 296% <span class="o">(</span>~3x<span class="o">)</span>    |
  +---------+-------------------+--------------------+------------+---------------+
  | Remote  | 18.19s            | 35.11s             |  53.30s    | 100% <span class="o">(</span>1x<span class="o">)</span>     |
  +---------+-------------------+--------------------+------------+---------------+</code></pre></figure>

<p>Of course a 3x improvement doesn’t come as a surprise when you are basically comparing a Macbook Pro with 2 (virtual) CPUs allocated to Docker, versus an 8 core dedicated Linux machine (with hyperthreading and higher internet bandwidth) even though not everything runs multi-threaded. But it is a big improvement that you can quickly and easily get for yourself and reap the benefits, which quickly adds up over time. Not to mention the complete silence at which you gain the faster build times.</p>

<p>As a bonus, you can now stop running Docker Desktop entirely, and no longer see a Docker process “idling” in the background that would otherwise still be using around 20% CPU all the time (doing nothing).</p>

<p>Being able to build X86_64 images on a remote machine, incidentally also makes it more viable to migrate my development environment to Apple Silicon in the future, not depending on Apple ARM to build and run my X86_64 images.</p>

<p>Finally, of course you can also <code class="language-plaintext highlighter-rouge">docker run</code> containers on your remote host. For example running MongoDB:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"> <span class="nv">$ </span>docker run <span class="nt">--name</span> mongo <span class="nt">-d</span> <span class="nt">-p</span> 27017:27017 <span class="nt">-v</span> /root/data:/data/db mongo:4.2.8
 <span class="c"># Note: /root/data is located on your remote machine</span></code></pre></figure>

<p>In order to access and use the running MongoDB container locally, make sure to SSH tunnel to your remote machine and forward the relevant ports. For this you can update your SSH config file: <code class="language-plaintext highlighter-rouge">.ssh/config</code>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre>Host coentunnel
  HostName whatever.com
  User coen
  ForwardAgent <span class="nb">yes
  </span>ServerAliveInterval 60
  ServerAliveCountMax 10
  LocalForward 27017 localhost:27017 <span class="c"># Mongo</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>A big word of <strong>caution</strong> here is to make sure you firewall your ports properly on your remote server, because Docker is known to <a href="https://github.com/docker/for-linux/issues/690">bypass ufw firewall rules</a>!!!</p>

<h3 id="downsides">Downsides</h3>

<p>Using a remote Docker host works really well for me, but there are a couple of downsides to this approach:</p>

<p>The first one would be “added complexity &amp; dependency”, because now you have added an extra machine to your development environment that you need to keep up-to-date and secure. Especially if you also use it to <code class="language-plaintext highlighter-rouge">docker run</code> containers for local development.</p>

<p>Secondly, if you use <code class="language-plaintext highlighter-rouge">docker-compose</code> for local development (often used to inject your live code changes), then you cannot map your local drive into the docker containers, as the mounted volumes will be pointing to folders on your remote machine. You can find more information about how to deploy on remote Docker hosts with docker-compose <a href="https://www.docker.com/blog/how-to-deploy-on-remote-docker-hosts-with-docker-compose/">here</a>.</p>

<p>Last but not least, remote servers are not free, so there is an additional cost involved. However, as pointed out earlier, <a href="https://hetzner.com">Hetzner</a> is a very cheap server provider you can use, or you can start with any other small cloud instance (e.g. AWS, Google, etc). I guess that a lot of developers actually already run a Linux box somewhere (often for testing) that they can use as their remote docker host too.</p>

<h3 id="wrap-up">Wrap up</h3>

<p>As an Apple enthusiast, I don’t see myself switching to a local Linux development computer anytime soon, but I was kind of annoyed with the lack of macOS Docker performance and noisy CPU fans when building images.</p>

<p>Having a hard time believing that the upcoming switch to Apple Silicon will alleviate this issue (still hope for the best, but prepare for the worst), I was happy that I found a solution by introducing a remote Docker host, which was trivially easy to setup and use with Docker Contexts. Sometimes a small change can have a big impact.</p>

<p>IMHO the benefits I described in this article more than make up for the downsides. Hopefully this may benefit you too. If you have any suggestions for improvements, then please let me know!</p>

      <div class='clear_both tags'>
        <span>
          tags: 
          <a href="../../../archive#docker">docker</a>,  
          <a href="../../../archive#hetzner">hetzner</a>,  
          <a href="../../../archive#bedrock">bedrock</a>,  
          <a href="../../../archive#apple-silicon">apple-silicon</a> 
        </span>
      </div>
      <div class="comments">
	<span style="font-size: 100%;"><a href="/2020/10/26/docker-on-macos-without-noisy-fans#disqus_thread">View Comments</a> </span>
      </div>
    </p>
  </div>
  
  <div class="post blog">
    <h2><a href="/2020/08/16/jekyll-and-algolia-search-integration">Jekyll and Algolia search integration</a></h2>
    <p class="publishdate">Sunday, 16 August  2020 </p>
    <p><p><img src="https://beatletech.com/images/jekyll-and-algolia.png" alt="Algolia" width="98%" title="Jekyll and Algolia" style="margin-left:0px" /></p>

<p>Recently I decided to add search functionality to my <a href="https://beatletech.com">BeatleTech</a> site (indeed, the one you are visiting right now). Not because I needed my readers to filter through the overwhelming number of articles I have written here (which I have not), but simply because I thought it would be a cool feature that would bring some nice interactivity to the site and to spark my ambition to write more blog posts going forward.</p>

<p>In this article I will explain <strong>why</strong> I picked <a href="https://www.algolia.com/">Algolia Search</a> and <strong>how</strong> it was integrated with this <a href="https://jekyllrb.com/">Jekyll</a> generated static site, including some interesting improvements.</p>

<h3 id="why-algolia-search">Why Algolia Search?</h3>

<p>While tinkering a bit with the design and layout of this site during a rainy day at a Dutch campsite, I was looking for an easy Jekyll plugin to bring search to my website. Although I have a lot of experience in working directly with <a href="https://www.elastic.co/">Elasticsearch</a>, I didn’t want to go down a route of building and deploying everything from scratch. While certainly a nice exercise, this would definitely take too much time and maintenance down the line, which wouldn’t be worth it (yet) looking at the traffic statistics. So, like I said, looking for something easy and quick to get up and running within a day.</p>

<p>After some Google search queries, I quickly stumbled upon some people recommending Algolia at the <a href="https://talk.jekyllrb.com/t/how-to-add-a-search-bar/606/7">Jekyll talk</a> discussion board.</p>

<p>Digging into Algolia, I found the following compelling reasons to integrate with Algolia Search:</p>
<ul>
  <li><strong>Known brand</strong>. It turns out I was already quite familiar (and satisfied) with Algolia Search as a consumer of <a href="https://hn.algolia.com/">Hacker News Search</a> which is powered by Algolia.</li>
  <li><strong>Free tier</strong>. They recently (July 1st) introduced more <a href="https://blog.algolia.com/introducing-algolias-most-customer-friendly-pricing/">customer-friendly pricing</a> with a starting free tier as long as you would show the “Search by Algolia” next to your search results. Also with reasonable pricing when I need to scale up.</li>
  <li><strong>Great documentation</strong>. Their <a href="https://community.algolia.com/jekyll-algolia/getting-started.html">Getting started</a> is clear, complete and up-to-date.</li>
  <li><strong>Open source</strong>. <a href="https://github.com/algolia/jekyll-algolia">Jekykll Algolia Plugin</a> for indexing Jekyll posts</li>
  <li><strong>UI Template</strong>. Template with UI component using <a href="https://community.algolia.com/instantsearch.js/">instantsearch.js</a></li>
  <li><strong>Example project</strong>. Github project <a href="https://github.com/algolia/jekyll-algolia-example">jekyll-algolia-example</a></li>
</ul>

<h3 id="how-to-integrate-algolia-and-jekyll">How to integrate Algolia and Jekyll?</h3>

<p>To integrate with Jeyll we first need to install and run the <a href="https://github.com/algolia/jekyll-algolia">jekyll-algolia-plugin</a> to push the content of our Jekyll website to our Algolia index. Secondly we need to update our HTML with templating and <a href="https://community.algolia.com/instantsearch.js/">Instantsearch.js</a>.</p>

<h4 id="1-pushing-content-to-your-algolia-index">1. Pushing content to your Algolia index</h4>

<p>This is a simple three step process, as lined out in the README of the <a href="https://github.com/algolia/jekyll-algolia">jekyll-algolia-plugin</a> repository. First add the jekyll-algolia gem to your Gemfile, after which you run <code class="language-plaintext highlighter-rouge">bundle install</code> to fetch all the dependencies:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre>  <span class="c1"># Gemfile</span>

  <span class="n">group</span> <span class="ss">:jekyll_plugins</span> <span class="k">do</span>
    <span class="n">gem</span> <span class="s1">'jekyll-algolia'</span><span class="p">,</span> <span class="s1">'~&gt; 1.0'</span>
  <span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Next, add your <code class="language-plaintext highlighter-rouge">application_id</code>, <code class="language-plaintext highlighter-rouge">index_name</code> and <code class="language-plaintext highlighter-rouge">search_only_api_key</code> to the Jekyll <code class="language-plaintext highlighter-rouge">_.config.yml</code> file:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre>  <span class="c1"># _.config.yaml</span>

  <span class="na">algolia</span><span class="pi">:</span>
    <span class="na">application_id</span><span class="pi">:</span> <span class="s1">'</span><span class="s">your_application_id'</span>
    <span class="na">index_name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">your_indexname'</span>
    <span class="na">search_only_api_key</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2b61f303d605176b556cb377d5ef3acd'</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Finally, get your private Algolia admin key (which you can find in your Algolia dashboard) and run the following to execute the indexing:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">  <span class="nv">ALGOLIA_API_KEY</span><span class="o">=</span><span class="s1">'your_admin_api_key'</span> bundle <span class="nb">exec </span>jekyll algolia</code></pre></figure>

<h4 id="2-adding-instantsearchjs-to-the-front-end">2. Adding instantsearch.js to the front-end</h4>

<p>For the front-end part I followed the excellent Algolia community <a href="https://community.algolia.com/jekyll-algolia/blog.html">tutorial</a>. Instead of repeating all the documented steps here, I’ll only highlight the relative changes I made.</p>

<p>The integration consists of two parts:</p>
<ul>
  <li>A <code class="language-plaintext highlighter-rouge">search-hits-wrapper</code> div element where we load the search results. These results are located front and center under the navigation bar (pushing the rest of the content down).</li>
  <li>The instantsearch.js dependency, template configuration and styling. All of which is located in the <code class="language-plaintext highlighter-rouge">_includes/algolia.html</code> file, which can be viewed in full in the <a href="https://github.com/beatlevic/beatletech/blob/master/_includes/algolia.html">source code</a> of this site.</li>
</ul>

<p>I made the following changes compared to the community tutorial:</p>
<ul>
  <li><strong>Hide Search results by default (style=”display:none”) and don’t fire off an empty query that returns all articles.</strong> The default empty query returns all articles and to mitigate this I added a <code class="language-plaintext highlighter-rouge">searchFunction</code> to the instantsearch options:</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>  <span class="kd">const</span> <span class="nx">search</span> <span class="o">=</span> <span class="nx">instantsearch</span><span class="p">({</span>
    <span class="na">appId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">K4MUG7LHCA</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">apiKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2b61f303d605176b556cb377d5ef3acd</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// public read-only key</span>
    <span class="na">indexName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">prod_beatletech</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">searchFunction</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">helper</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">searchResults</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">search-hits-wrapper</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">helper</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">query</span> <span class="o">===</span> <span class="dl">""</span> <span class="o">&amp;&amp;</span> <span class="nx">searchResults</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">searchResults</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="nx">helper</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">query</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
      <span class="nx">helper</span><span class="p">.</span><span class="nx">search</span><span class="p">();</span>
    <span class="p">},</span>
  <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></figure>

<ul>
  <li><strong>Don’t fire off a query on every keystroke.</strong> While the default of triggering a search query with every keystroke is great in terms of responsiveness, it will also help you burn quickly through your free 10k search requests. In order to trade off query responsiveness for less api requests, I added the following <code class="language-plaintext highlighter-rouge">queryHook</code> with a 500ms delay:</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>  <span class="nx">search</span><span class="p">.</span><span class="nx">addWidget</span><span class="p">(</span>
    <span class="nx">instantsearch</span><span class="p">.</span><span class="nx">widgets</span><span class="p">.</span><span class="nx">searchBox</span><span class="p">({</span>
      <span class="na">container</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#search-searchbar</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">placeholder</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Search into posts...</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">poweredBy</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">autofocus</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">showLoadingIndicator</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">queryHook</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">refine</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timerId</span><span class="p">);</span>
        <span class="nx">timerId</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">refine</span><span class="p">(</span><span class="nx">query</span><span class="p">),</span> <span class="mi">500</span><span class="p">);</span>
      <span class="p">},</span>
    <span class="p">})</span>
  <span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></figure>

<ul>
  <li><strong>Show “Search by Algolia” badge.</strong> If you want to make use of the free plan, they ask you in exchange that you display a “Search by Algolia” logo next to your search results. You can use the Instantsearch searchBox options Boolean flag <code class="language-plaintext highlighter-rouge">poweredBy</code> or if you want more flexibility, as I did, you can find different versions of their logo <a href="https://www.algolia.com/press/?section=brand-guidelines">here</a> and add it to the <code class="language-plaintext highlighter-rouge">search-hits-wrapper</code> div.</li>
  <li><strong>Turn off autofocus</strong>. Add and set the searchBox option <code class="language-plaintext highlighter-rouge">autofocus</code> to <code class="language-plaintext highlighter-rouge">false</code> if you don’t want the input search to autofocus. While I at first liked the autofocus, because the user can immediately type their search query, it turns out on mobile devices you automatically zoom in on the search input field. So I recommend turning it off.</li>
</ul>

<h3 id="experience-so-far">Experience so far</h3>

<p>I really liked the whole integration process, which was really smooth and not much work. I mean, I even went as far as to write all about it here. 🙂</p>

<p>One additional benefit of Algolia, which I haven’t listed yet, is gaining statistics on your site’s search queries with weekly email updates and an interactive dashboard. Helping you figure out what your readers and followers are looking for.</p>

<p>I am using the slightly older v2 of instantsearch.js, so at some point I will want to update to the latest version, which will decrease to javascript library size. Running <a href="https://developers.google.com/speed/pagespeed/insights/?hl=nl">PageSpeed Insights</a> is still get a very comfortable 96/100 score, so there is no immediate need, but less is more when it comes to JS dependencies.</p>

<p>If my search query volume increases above the free 10k a month, then I’m happy to pay for this service. I do have one feature request for the Algolia team for the paid service, which is adding a monthly payment limit with alerting, to make sure you won’t get any surprise overcharge bill.</p>

<p>Anyway, so far a big thumbs up for Algolia. 👍</p>

<p><a href="https://news.ycombinator.com/item?id=24181472">HN Discussion</a></p>

      <div class='clear_both tags'>
        <span>
          tags: 
          <a href="../../../archive#javascript">javascript</a>,  
          <a href="../../../archive#jekyll">jekyll</a>,  
          <a href="../../../archive#algolia">algolia</a> 
        </span>
      </div>
      <div class="comments">
	<span style="font-size: 100%;"><a href="/2020/08/16/jekyll-and-algolia-search-integration#disqus_thread">View Comments</a> </span>
      </div>
    </p>
  </div>
  
  <div class="post blog">
    <h2><a href="/2019/09/02/chief-architect-at-rekall-ai">Chief Architect at Rekall.ai</a></h2>
    <p class="publishdate">Monday, 02 September  2019 </p>
    <p><p>For the past year I have been working as Tech Lead at <a href="https://www.airfranceklm.com/en/group">Air France - KLM</a>, in the ODS (Operations Decision Support) department. My team was responsible for the on-premise Amsterdam Data Lake, developing ETL pipelines with Spark streaming jobs in Scala, including data modeling of the source system (events) and coordinating with the Data Science team.</p>

<p>The on-premise Hadoop cluster was based on Hortonworks HDP, including Spark, HBase, Kafka and Hive. There was a lot of work involved in configuring and managing the on-premise cluster, and we would spend more time than we would like on infrastructure related issues. Based on my previous cloud experiences I started advocating for a push to Azure Cloud (as KLM already had Azure Active Directory and Office 365) for the Data Lake, and started working on the required Architecture design and proposal.</p>

<p>Even though I really liked learning the enormous organization (with two distinct cultures) in order to navigate my way to get in contact with the right people to make Cloud happen, all the way up to CTO and VP levels. I came across another opportunity outside of KLM to work in an environment that was more startup like, more agile, and changing faster with more direct personal impact on the course of the company.</p>

<p>This new opportunity, freelancing as Chief Architect at <a href="https://rekall.ai">Rekall.ai</a> to work on data driven solutions powered by Blockchain and AI, is actually where I started today and I’m excited that I’m reunited with some of my former colleagues from <a href="2015/02/09/bottlenose-series-b">bottlenose.com</a>! I’m looking forward to work with an elite team of highly experienced Developers, Designers and Biz Devs. It’s time to go full throttle!</p>

<p><a href="http://rekall.ai">
<img src="https://s3-eu-west-1.amazonaws.com/eu-west-1.beatletech.com/images/logo-rekall.png" alt="Rekall.ai" title="Chief Architect" width="80px" height="80px" style="margin-left:0px" />
</a></p>

      <div class='clear_both tags'>
        <span>
          tags: 
          <a href="../../../archive#startup">startup</a>,  
          <a href="../../../archive#machine learning">machine learning</a>,  
          <a href="../../../archive#AI">AI</a>,  
          <a href="../../../archive#rekall.ai">rekall.ai</a> 
        </span>
      </div>
      <div class="comments">
	<span style="font-size: 100%;"><a href="/2019/09/02/chief-architect-at-rekall-ai#disqus_thread">View Comments</a> </span>
      </div>
    </p>
  </div>
  
  <div class="post blog">
    <h2><a href="/2018/08/06/the-post-persgroep-era">The post-Persgroep era</a></h2>
    <p class="publishdate">Monday, 06 August  2018 </p>
    <p><p>Last week I finished my job as Lead Data Engineer at the <a href="https://persgroep.nl">Persgroep</a> in Amsterdam, where
I worked for the past year. I had a great time crafting ETL pipelines, writing Scala and Python for Spark (AWS
EMR), scheduling tasks (DAGs) with Airflow, and scaling with Redshift (Minus some boring, but important GDPR
work). But most of all I liked the (Kanban) team, which grew during my time from just 3 members to 15, and I
enjoyed coaching and helping out the new recruits, as well as providing technical support and architectural advise to other teams.</p>

<p>So why leave my esteemed colleagues, when everything is fine and dandy? Can Christian van Thillo really do
without me? (Better known by insiders as Christiaan van de Thillo). Well, I have this tendency to shake things
up once in a while, and I felt the need to explore new startup opportunities. So here we are, I cleared my
schedule for the next half a year, and will be diving into Strong-AI, Genomics, Crypto and Healthcare to find
interesting (and doable) business angles. First I like to explore the latest research and follow a couple of
Coursera courses, while simultaneously hack on some neural nets for crypto value predictions. In other words,
playing around until I hit something concrete and tangible. I have a couple of friends that also have
available overtime to join in on the fun. I’m also keeping an ear to the ground for any other opportunities in
these domains.</p>

<p>So what was the first thing I did last week with my free time? I updated my BeatleTech website, the site you
are actually reading right now! One of my TODOs was to run everything over https, now that Chrome by default
shows your website as not secure when it is served over http
(<a href="https://www.theverge.com/2018/2/8/16991254/chrome-not-secure-marked-http-encryption-ssl">news</a>). This was
relatively easy to fix thanks to <a href="https://letsencrypt.org/">Let’s Encrypt</a> and
<a href="https://certbot.eff.org/">Certbot</a>. As long as you know that Letsencrypt will verify your website over IPv6
if you added an AAAA DNS record, so make sure it points to the correct IPv6 address (mine wasn’t :/ so I
dropped the incorrect AAAA record).</p>

<p>Secondly I was inspired by a Hacker News <a href="https://news.ycombinator.com/item?id=17671490">discussion</a> on improving
your portfolio website, to include a section about my home office setup. I have spent many hours perfecting my
work setup, so it was only logical to also write about it. You can find it
<a href="https://beatletech.com/Setup">here</a> and in the top menu.</p>

<p>Finally after cleaning up my HTML, upgrading Jekyll, minimizing assets and moving them to S3
(<a href="https://github.com/beatlevic/beatletech">source</a>), I’m concluding my stint on BeatleTech improvements with
this blog post. Next up, research and play time!</p>

<p>Wish me luck.</p>

      <div class='clear_both tags'>
        <span>
          tags: 
          <a href="../../../archive#startup">startup</a>,  
          <a href="../../../archive#machine learning">machine learning</a>,  
          <a href="../../../archive#AI">AI</a> 
        </span>
      </div>
      <div class="comments">
	<span style="font-size: 100%;"><a href="/2018/08/06/the-post-persgroep-era#disqus_thread">View Comments</a> </span>
      </div>
    </p>
  </div>
  
  <div class="post blog">
    <h2><a href="/2016/05/02/othot-raises-capital">Othot raises $1.7 Million</a></h2>
    <p class="publishdate">Monday, 02 May  2016 </p>
    <p><p>Great news for Othot as they just secured $1.7 Million in their first
round of outside financing. For more details and a shoutout for
Dr. Mark Voortman check out <a href="http://markets.financialcontent.com/mng-ba.mercurynews/news/read?GUID=32015429">MercuryNews</a>.</p>

      <div class='clear_both tags'>
        <span>
          tags: 
          <a href="../../../archive#othot">othot</a>,  
          <a href="../../../archive#funding">funding</a> 
        </span>
      </div>
      <div class="comments">
	<span style="font-size: 100%;"><a href="/2016/05/02/othot-raises-capital#disqus_thread">View Comments</a> </span>
      </div>
    </p>
  </div>
  
  <div class="post blog">
    <h2><a href="/2015/09/10/o-data-scientist-where-art-thou">O Data Scientist, Where Art Thou?</a></h2>
    <p class="publishdate">Thursday, 10 September  2015 </p>
    <p><p><strong><em>Note: This is a repost of my original blog post at
   <a href="http://www.othot.com/o-data-scientist-where-art-thou/">OThot</a>, where I also work as Senior Data Scientist.</em></strong></p>

<p>By now you have probably heard about the <strong>“Big Data”</strong> hype in one form [<a href="http://www.wired.com/insights/2014/04/big-data-big-hype/">1</a>] or another [<a href="http://www.forbes.com/sites/larrymyler/2015/07/29/big-data-is-a-big-problem-thats-getting-bigger/">2</a>], or read about how other companies are achieving success harnessing their data [<a href="http://www.forbes.com/sites/howardbaldwin/2015/06/08/whos-ready-for-some-big-data-success-stories/">3</a>]. With all the attention for Big Data and the accompanied field of Data Science to make sense of the data, it would be no surprise if you want your company to benefit as well from one or more Data Scientists generating actionable insights from your ever-growing sea of data.</p>

<p>When you are at this stage with your company and start to search for some great Data Scientists you will quickly find out that these people are in short supply. Now why is that? And why is it potentially dangerous if you simply want to bump or educate one of your company’s developers to a Data Scientist role if your search keeps turning up empty?</p>

<p>The reason why Data Scientists are scarce is twofold. First off, the aforementioned Big Data hype with its growing need for Data Scientists (with the amount of data outgrowing the number of data analysts [<a href="http://www.delphianalytics.net/wp-content/uploads/2013/04/GrowthOfDataVsDataAnalysts.png">4</a>]), is creating a high demand for Data Scientists. With many Data Science positions opening up, there is also the troublesome side effect of developers starting to market themselves as Data Scientists, while having zero to none of the required expertise.</p>

<p>Secondly, and somewhat problematic, is the required skill set for a Data Scientist. Why problematic? Well, this is expressed clearly in the by now classic illustration of the Data Science skill set, the Data Science Venn Diagram [<a href="http://drewconway.com/zia/2013/3/26/the-data-science-venn-diagram">5</a>]:</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/eu-west-1.beatletech.com/images/Data_Science_VD.png" alt="Data Science Venn Diagram" style="margin-left:140px" /></p>

<p>The three main skills (indicated by the primary colors) are hacking skills, math and stats knowledge, and substantive expertise. What this implies is that you need to be a programmer and statistician, while also having a lot of experience in these fields and in the relevant problem domain and business context. Given that each of these skills on their own already poses a challenge when you want to find a great candidate, then searching for all of them combined in one person can send you on a wild goose chase.</p>

<p>Earlier I mentioned the danger of turning developers (with hacking
skills) into Data Scientists, which if you look at the diagram, might
put you in the Danger Zone! Reason being that if you have hackers
without substantive Math and Statistics knowledge you <em>“[..] give people
the ability to create what appears to be a legitimate analysis without
any understanding of how they got there or what they have created”</em> [<a href="http://drewconway.com/zia/2013/3/26/the-data-science-venn-diagram">5</a>]. This could give rise to flat-out wrong business decisions based on wrong interpretations of the data.</p>

<p>This is not meant to say that you cannot turn a developer into a Data Scientist, but rather that you have be aware that you also have to teach them the required math and statistics background. Or the other way around, you need to make sure that you are teaching your statisticians to gain better development skills. Nowadays there are many resources on the internet for learning Data Science [<a href="https://www.dataquest.io/blog/how-to-actually-learn-data-science/">6</a>].  This will get you started, but it will take a lot of time and practice to gain enough experience for a desired level of proficiency.</p>

<p>We believe there might be a better alternative to growing your own in-house Data Science team and that is to have OThot be of service. OThot can either take the Data Science challenge off your hands completely or complement your Data Scientists with substantial expertise in all required skills. So don’t hesitate to reach out if you want to know more about what <a href="http://www.othot.com">OThot</a> has to offer!</p>

<h4 id="sources">Sources</h4>

<p>[1] Big Data, Big Hype? <a href="http://www.wired.com/insights/2014/04/big-data-big-hype/">http://www.wired.com/insights/2014/04/big-data-big-hype/</a></p>

<p>[2] Big Data Is A Big Problem That’s Getting Bigger: <a href="http://www.forbes.com/sites/larrymyler/2015/07/29/big-data-is-a-big-problem-thats-getting-bigger/">http://www.forbes.com/sites/larrymyler/2015/07/29/big-data-is-a-big-problem-thats-getting-bigger/</a></p>

<p>[3] Who is ready for some big data success stories: <a href="http://www.forbes.com/sites/howardbaldwin/2015/06/08/whos-ready-for-some-big-data-success-stories/">http://www.forbes.com/sites/howardbaldwin/2015/06/08/whos-ready-for-some-big-data-success-stories/</a></p>

<p>[4] Growth of Data vs Growth of Data Analysts: <a href="http://www.delphianalytics.net/wp-content/uploads/2013/04/GrowthOfDataVsDataAnalysts.png">http://www.delphianalytics.net/wp-content/uploads/2013/04/GrowthOfDataVsDataAnalysts.png</a></p>

<p>[5] The Data Science Venn Diagram: <a href="http://drewconway.com/zia/2013/3/26/the-data-science-venn-diagram">http://drewconway.com/zia/2013/3/26/the-data-science-venn-diagram</a></p>

<p>[6] How to actually learn data science: <a href="https://www.dataquest.io/blog/how-to-actually-learn-data-science/">https://www.dataquest.io/blog/how-to-actually-learn-data-science/</a></p>

      <div class='clear_both tags'>
        <span>
          tags: 
          <a href="../../../archive#othot">othot</a>,  
          <a href="../../../archive#statistics">statistics</a>,  
          <a href="../../../archive#data science">data science</a> 
        </span>
      </div>
      <div class="comments">
	<span style="font-size: 100%;"><a href="/2015/09/10/o-data-scientist-where-art-thou#disqus_thread">View Comments</a> </span>
      </div>
    </p>
  </div>
  
  <div class="post blog">
    <h2><a href="/2015/06/01/new-job-at-thinktopic">New Job at ThinkTopic</a></h2>
    <p class="publishdate">Monday, 01 June  2015 </p>
    <p><p>Two months ago a good friend of mine (<a href="https://www.linkedin.com/in/rosejn">Jeff Rose</a>), who is a
former <a href="http://deepmind.com/">DeepMind</a> engineer (acquired by Google), presented me with an
opportunity to come work at <a href="http://thinktopic.com">ThinkTopic</a> to build intelligent tools for a big
publisher that involves image search, collaborative filtering, an intelligent catalog, and much more
by applying Deep Learning techniques for learning in Neural Networks. Additionally most development
work would be done in <a href="http://clojure.org">Clojure</a> (a Lisp dialect on the JVM), which for me really
is the icing on the cake, being a longtime Clojure and functional programming fan.</p>

<p>So after almost 4 years of working as Chief Architect and Data Scientist at
<a href="http://bottlenose.com">Bottlenose</a>, I decided to take on this new challenge to start working for
ThinkTopic, of which today is my first day.</p>

<p>I had a great time at Bottlenose working with a great group of people. It has been amazing to see
the company grow to where it is right now, and the potential of where it could go. Getting the
<a href="http://beatletech.com/2015/02/09/bottlenose-series-b/">KPMG investment</a> has been a great milestone
and together with all the work over the years the idea of no longer being part of Bottlenose feels a
bit weird. Bottlenose has given me a lot in terms of experience, joy and friendships.</p>

<p>Having said that, I’m keeping my desk at the Hackers and Founders building in Amsterdam, so I’m not
going cold turkey on my former colleagues (only switching rooms).</p>

<p>I’m excited to go on this new ThinkTopic adventure, which for today means diving back into
Convolutional Neural Networks. May the fun and challenge begin.</p>

<p><img src="https://s3-eu-west-1.amazonaws.com/eu-west-1.beatletech.com/images/thinktopic-logo.png" alt="ThinkTopic" width="646" height="195" style="margin-left:60px" /></p>

      <div class='clear_both tags'>
        <span>
          tags: 
          <a href="../../../archive#thinktopic">thinktopic</a>,  
          <a href="../../../archive#clojure">clojure</a>,  
          <a href="../../../archive#deep-learning">deep-learning</a> 
        </span>
      </div>
      <div class="comments">
	<span style="font-size: 100%;"><a href="/2015/06/01/new-job-at-thinktopic#disqus_thread">View Comments</a> </span>
      </div>
    </p>
  </div>
  
  <div class="post blog">
    <h2><a href="/2015/05/17/goodbye-pvalues-hello-bayesian-statistics">Goodbye P-values, Hello Bayesian Statistics!</a></h2>
    <p class="publishdate">Sunday, 17 May  2015 </p>
    <p><p><strong><em>Note: This is a repost of my original blog post at
   <a href="http://www.othot.com/goodbye-p-values-hello-bayesian-statistics/">Othot</a>, where I also work as Senior Data Scientist.</em></strong></p>

<p>In statistics there is the old and ongoing debate of Frequentism versus Bayesianism, which has been humorously depicted in the following popular XKCD cartoon [<a href="http://www.xkcd.com/1132/">1</a>]:</p>

<p><img src="https://imgs.xkcd.com/comics/frequentists_vs_bayesians.png" alt="Frequentism vs Bayesianism" width="468" heigth="709" style="margin-left:150px" /></p>

<p>In this cartoon we see the Frequentist statistician believing that the odds (p-value) of the
neutrino detector lying are below the (arbitrary) significance level of 0.05, saying that it is
unlikely that machine is lying, therefore concluding that the Sun must have exploded. The
Bayesianist on the other hand also takes his prior knowledge about the Sun into account and
determines that given the billions of years track record of the Sun not exploding vastly outweighs
the likelihood of the neutrino detector lying.</p>

<p>The use of explicit priors with Bayesianism versus implicit priors with Frequentism (yes there are
priors, but they are fixed), is one difference most statisticians know about. However there are
actually more subtle differences that carry big consequences that can sometimes lead to
contradictive conclusions between the two approaches.</p>

<p>The popular blogging site <strong>“Pythonic Perambulations”</strong> has a great series of technical posts that give
a practical introduction to Frequentism and Bayesianism [<a href="http://jakevdp.github.io/blog/2014/03/11/frequentism-and-bayesianism-a-practical-intro/">2</a>], which are highly recommended. In this
series Jake Vanderplas explains with great clarity the differences, which are summarized as follows:</p>

<ul>
  <li>Frequentists and Bayesians disagree about the definition of probability</li>
  <li>Frequentism considers probabilities to be objective and related to frequencies of real or hypothetical events</li>
  <li>Bayesianism considers probabilities to be subjective and measures degrees of knowledge or belief</li>
</ul>

<p>As a result he explains: <em>“[..] frequentists consider model parameters to be fixed and data to be
random, while Bayesians consider model parameters to be random and data to be fixed.”</em> [<a href="http://jakevdp.github.io/blog/2014/06/12/frequentism-and-bayesianism-3-confidence-credibility/">3</a>]</p>

<p>This actually has far stretching consequences for the use of Frequentism in Science, where you most
often have one dataset (i.e., fixed data) for which you want to make inferences, and you are not
interested in inferences for hypothetical other datasets. Using Frequentism in science answers the
wrong question, because you want answers for your specific dataset. Therefore the use of p-values
and confidence intervals in this context are useless.</p>

<p>But you might ask, why then is the use of p-values the de facto standard in scientific research, if
it is fundamentally wrong? Good question. The problem is that confidence intervals are easy to
compute and often give similar results to the Bayesian approach. This doesn’t change the fact that
the approach is flat out invalid, and doesn’t support the conclusions made.</p>

<p>Recently the science community started acknowledging this fact and we are now starting to see
journals, e.g., <strong>“Basic and Applied Social Psychology”</strong> [<a href="http://www.tandfonline.com/doi/abs/10.1080/01973533.2015.1012991">4</a>], where research using p-values is being
rejected. This has not gone unnoticed as both Nature, the international weekly journal of Science,
as well as Scientific American, wrote about it in depth and both proposed Bayesian statistics as a
good alternative. [<a href="http://www.nature.com/news/statistics-p-values-are-just-the-tip-of-the-iceberg-1.17412">5</a>][<a href="http://www.scientificamerican.com/article/scientists-perturbed-by-loss-of-stat-tools-to-sift-research-fudge-from-fact">6</a>]</p>

<p>The Scientific American article adds the following about p-values, and confirms the aforementioned
hypothetical other datasets problem with Frequentism:</p>

<blockquote>
  <p><em>“Unfortunately, p-values are also widely misunderstood, often believed to furnish more
information than they do. Many researchers have labored under the misbelief that the p-value gives
the probability that their study’s results are just pure random chance. But statisticians say the
p-value’s information is much more non-specific, and can interpreted only in the context of
hypothetical alternative scenarios: The p-value summarizes how often results at least as extreme as
those observed would show up if the study were repeated an infinite number of times when in fact
only pure random chance were at work. This means that the p-value is a statement about imaginary
data in hypothetical study replications, not a statement about actual conclusions in any given
study”</em>
[<a href="http://www.scientificamerican.com/article/scientists-perturbed-by-loss-of-stat-tools-to-sift-research-fudge-from-fact">6</a>]</p>
</blockquote>

<p>Needless to say, but at <a href="http://www.othot.com">Othot</a> we are big proponents of the Bayesian approach for statistical inferences. In a previous blog post by Mark Voortman [<a href="http://www.othot.com/what-do-searching-for-a-plane-and-a-doctors-diagnosis-have-in-common">7</a>], we already started talking and explaining the Bayesian approach and you can safely bet to expect more of that.</p>

<h4 id="sources">Sources</h4>

<p>[1] XKCD: Frequentists vs. Bayesians <a href="http://www.xkcd.com/1132/">http://www.xkcd.com/1132/</a></p>

<p>[2] Frequentism and Bayesianism: A Practical Introduction
<a href="http://jakevdp.github.io/blog/2014/03/11/frequentism-and-bayesianism-a-practical-intro/">http://jakevdp.github.io/blog/2014/03/11/frequentism-and-bayesianism-a-practical-intro/</a></p>

<p>[3] Frequentism and Bayesianism III: Confidence, Credibility, and why Frequentism and Science do not Mix
<a href="http://jakevdp.github.io/blog/2014/06/12/frequentism-and-bayesianism-3-confidence-credibility/">http://jakevdp.github.io/blog/2014/06/12/frequentism-and-bayesianism-3-confidence-credibility/</a></p>

<p>[4] Journal of Basic and Applied Social Psychology <a href="http://www.tandfonline.com/doi/abs/10.1080/01973533.2015.1012991">http://www.tandfonline.com/doi/abs/10.1080/01973533.2015.1012991</a></p>

<p>[5] Statistics: P values are just the tip of the iceberg <a href="http://www.nature.com/news/statistics-p-values-are-just-the-tip-of-the-iceberg-1.17412">http://www.nature.com/news/statistics-p-values-are-just-the-tip-of-the-iceberg-1.17412</a></p>

<p>[6] Scientists Perturbed by Loss of Stat Tools to Sift Research Fudge from Fact <a href="http://www.scientificamerican.com/article/scientists-perturbed-by-loss-of-stat-tools-to-sift-research-fudge-from-fact">http://www.scientificamerican.com/article/scientists-perturbed-by-loss-of-stat-tools-to-sift-research-fudge-from-fact</a></p>

<p>[7] What Do Searching For a Plane and a Doctor’s Diagnosis Have in Common? <a href="http://www.othot.com/what-do-searching-for-a-plane-and-a-doctors-diagnosis-have-in-common">http://www.othot.com/what-do-searching-for-a-plane-and-a-doctors-diagnosis-have-in-common</a></p>

      <div class='clear_both tags'>
        <span>
          tags: 
          <a href="../../../archive#othot">othot</a>,  
          <a href="../../../archive#statistics">statistics</a>,  
          <a href="../../../archive#bayesianism">bayesianism</a> 
        </span>
      </div>
      <div class="comments">
	<span style="font-size: 100%;"><a href="/2015/05/17/goodbye-pvalues-hello-bayesian-statistics#disqus_thread">View Comments</a> </span>
      </div>
    </p>
  </div>
  

  <div class="post blog">
    <h2><a href="archive">More...</a></h2>
  </div>
  </div> <!-- end main -->


        </div> <!-- end content -->

      <footer id="footer" class="grid_12">
  <p>
    Copyright &copy; 2010-2020
    <a
      href="https://beatletech.com"
      title="BeatleTech by Coen
    Stevens"
      >BeatleTech - Coen Stevens</a
    >
    - Built with <a href="https://jekyllrb.com/">Jekyll</a> (<a
      href="https://github.com/beatlevic/beatletech"
      >source</a
    >)
  </p>
</footer>

<div class="clear"></div>

      <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<link
  rel="stylesheet"
  type="text/css"
  href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css"
/>
<link
  rel="stylesheet"
  type="text/css"
  href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css"
/>

<script>
  const search = instantsearch({
    appId: "K4MUG7LHCA",
    apiKey: "2b61f303d605176b556cb377d5ef3acd",
    indexName: "prod_beatletech",
    searchFunction: function (helper) {
      var searchResults = document.getElementById("search-hits-wrapper");
      if (helper.state.query === "" && searchResults.style.display === "none") {
        return;
      }
      searchResults.style.display = helper.state.query ? "block" : "none";
      helper.search();
    },
  });

  const hitTemplate = function (hit) {
    let date = "";
    if (hit.date) {
      date = moment.unix(hit.date).format("MMM D, YYYY");
    }

    let url = `${hit.url}#${hit.anchor}`;

    const title = hit._highlightResult.title.value;

    let breadcrumbs = "";
    if (hit._highlightResult.headings) {
      breadcrumbs = hit._highlightResult.headings
        .map((match) => {
          return `<span class="post-breadcrumb">${match.value}</span>`;
        })
        .join(" > ");
    }

    const content = hit._highlightResult.html.value;

    return `
    <div class="post-item">
      <h2><a class="post-link" href="${url}">${title}</a></h2>
      <div class="publishdate" style="margin-left:0px; margin-bottom:10px">${date}</div>
      <!-- {#breadcrumbs}}<a href="${url}" class="post-breadcrumbs">${breadcrumbs}</a> -->
      <div class="post-snippet" style="margin-left: 20px">${content}</div>
    </div>
  `;
  };

  let timerId;

  search.addWidget(
    instantsearch.widgets.searchBox({
      container: "#search-searchbar",
      placeholder: "Search into posts...",
      poweredBy: false,
      autofocus: false,
      showLoadingIndicator: true,
      queryHook(query, refine) {
        clearTimeout(timerId);
        timerId = setTimeout(() => refine(query), 500);
      },
    })
  );

  search.addWidget(
    instantsearch.widgets.hits({
      container: "#search-hits",
      templates: {
        item: hitTemplate,
      },
    })
  );

  search.start();
</script>

<style>
  .ais-search-box {
    max-width: 100%;
    margin-bottom: 15px;
  }
  .post-item {
    margin-bottom: 30px;
  }
  .post-link .ais-Highlight {
    color: #111;
    font-style: normal;
    text-decoration: underline;
  }
  .post-breadcrumbs {
    color: #424242;
    display: block;
  }
  .post-breadcrumb {
    font-size: 18px;
    color: #424242;
  }
  .post-breadcrumb .ais-Highlight {
    font-weight: bold;
    font-style: normal;
    text-decoration: underline;
  }
  .post-snippet .ais-Highlight {
    color: #2a7ae2;
    font-style: normal;
    font-weight: bold;
    text-decoration: underline;
  }
  .post-snippet img {
    display: none;
  }
</style>

    </div> <!-- end wrapper -->

    <data id="mj-w-res-data" data-token="3c500cdbb042fff8c045dd8ba7175b16" class="mj-w-data" data-apikey="5MN5" data-w-id="EIl" data-lang="en_US" data-base="https://app.mailjet.com" data-width="640" data-height="328.253" data-statics="statics"></data>

    <script type="text/javascript" src="https://app.mailjet.com/statics/js/widget.modal.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20231246-1']);
      _gaq.push(['_trackPageview']);

      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">
      function dropDown(id) {
        var el = document.getElementById(id)
        var style = el.style.display;
        console.log(el);
        if (style == 'none') document.getElementById(id).style.display = "block"
        else document.getElementById(id).style.display = "none"
      }

      var h = location.hash;
      console.log(h);
      if (h) dropDown('tag-'+h.slice(1));
    </script>

    <script type="text/javascript">
      function onHover() {
        var el = document.getElementById("headshot")
        el.src = "images/jc-small.png"
      }

      function offHover() {
        var el = document.getElementById("headshot")
        el.src = "https://s3-eu-west-1.amazonaws.com/eu-west-1.beatletech.com/images/headshot.png"
      }
    </script>

  </body>
</html>
